!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.Infinite=t()}}(function(){return function t(e,i,r){function n(l,a){if(!i[l]){if(!e[l]){var s="function"==typeof require&&require;if(!a&&s)return s(l,!0);if(o)return o(l,!0);var p=new Error("Cannot find module '"+l+"'");throw p.code="MODULE_NOT_FOUND",p}var c=i[l]={exports:{}};e[l][0].call(c.exports,function(t){var i=e[l][1][t];return n(i?i:t)},c,c.exports,t,e,i,r)}return i[l].exports}for(var o="function"==typeof require&&require,l=0;l<r.length;l++)n(r[l]);return n}({1:[function(t,e,i){(function(i){var r=i.React||t("react"),n=t("lodash.isarray"),o=t("lodash.isfinite"),l=t("./computers/constant_infinite_computer.js"),a=t("./computers/array_infinite_computer.js"),s=r.createClass({displayName:"Infinite",propTypes:{handleScroll:r.PropTypes.func,preloadBatchSize:r.PropTypes.number,preloadAdditionalHeight:r.PropTypes.number,elementHeight:r.PropTypes.oneOfType([r.PropTypes.number,r.PropTypes.arrayOf(r.PropTypes.number)]).isRequired,containerHeight:r.PropTypes.number.isRequired,infiniteLoadBeginBottomOffset:r.PropTypes.number,onInfiniteLoad:r.PropTypes.func,loadingSpinnerDelegate:r.PropTypes.node,isInfiniteLoading:r.PropTypes.bool,timeScrollStateLastsForAfterUserScrolls:r.PropTypes.number,className:r.PropTypes.string},getDefaultProps:function(){return{handleScroll:function(){},loadingSpinnerDelegate:r.createElement("div",null),onInfiniteLoad:function(){},isInfiniteLoading:!1,timeScrollStateLastsForAfterUserScrolls:150}},getInitialState:function(){var t=this.createInfiniteComputer(this.props.elementHeight,this.props.children),e=this.props.preloadBatchSize?this.props.preloadBatchSize:this.props.containerHeight/2,i=this.props.preloadAdditionalHeight?this.props.preloadAdditionalHeight:this.props.containerHeight;return{infiniteComputer:t,numberOfChildren:this.props.children.length,scrollableHeight:void 0,displayIndexStart:0,displayIndexEnd:t.getDisplayIndexEnd(e+i),isInfiniteLoading:!1,currentScrollTop:void 0,previousScrollTop:void 0,preloadBatchSize:e,preloadAdditionalHeight:i,scrollTimeout:void 0,isScrolling:!1}},createInfiniteComputer:function(t,e){var i,s=r.Children.count(e);if(o(t))i=new l(t,s);else{if(!n(t))throw new Error("You must provide either a number or an array of numbers as the elementHeight prop.");i=new a(t,s)}return i},componentWillReceiveProps:function(t){var e=this,i={};i.infiniteComputer=this.createInfiniteComputer(t.elementHeight,t.children),void 0!==t.isInfiniteLoading&&(i.isInfiniteLoading=t.isInfiniteLoading);var r=t.preloadBatchSize;i.preloadBatchSize=r?r:t.containerHeight/2;var n=t.preloadAdditionalHeight;i.preloadAdditionalHeight=n?n:t.containerHeight,this.setState(i,function(){e.setStateFromScrollTop(e.getScrollTop())})},componentDidUpdate:function(t,e){r.Children.count(this.props.children)!==t.children.length&&this.setStateFromScrollTop(this.getScrollTop())},componentWillMount:function(){if(n(this.props.elementHeight)&&this.props.children.length!==this.props.elementHeight.length)throw new Error("There must be as many values provided in the elementHeight prop as there are children.")},componentDidMount:function(){this.setState({scrollableHeight:this.refs.scrollable.getDOMNode().clientHeight,currentScrollTop:this.getScrollTop(),previousScrollTop:this.getScrollTop()})},getScrollTop:function(){return this.refs.scrollable.getDOMNode().scrollTop},isScrollingDown:function(){return this.state.previousScrollTop<this.state.currentScrollTop},setStateFromScrollTop:function(t){var e=Math.floor(t/this.state.preloadBatchSize),i=this.state.preloadBatchSize*e,r=i+this.state.preloadBatchSize,n=Math.max(0,i-this.state.preloadAdditionalHeight),o=Math.min(this.state.infiniteComputer.getTotalScrollableHeight(),r+this.state.preloadAdditionalHeight);this.setState({displayIndexStart:this.state.infiniteComputer.getDisplayIndexStart(n),displayIndexEnd:this.state.infiniteComputer.getDisplayIndexEnd(o),currentScrollTop:t,previousScrollTop:this.state.currentScrollTop})},infiniteHandleScroll:function(t){var e=this.refs.scrollable.getDOMNode();e===t.target&&(this.props.handleScroll(e),this.handleScroll(t.target.scrollTop))},manageScrollTimeouts:function(){this.state.scrollTimeout&&clearTimeout(this.state.scrollTimeout);var t=this,e=setTimeout(function(){t.setState({isScrolling:!1,scrollTimeout:void 0})},this.props.timeScrollStateLastsForAfterUserScrolls);this.setState({isScrolling:!0,scrollTimeout:e})},handleScroll:function(t){this.manageScrollTimeouts(),this.setStateFromScrollTop(t);var e=t>this.state.infiniteComputer.getTotalScrollableHeight()-this.props.containerHeight-this.props.infiniteLoadBeginBottomOffset;e&&!this.state.isInfiniteLoading&&(this.setState({isInfiniteLoading:!0}),this.props.onInfiniteLoad())},buildScrollableStyle:function(){return{height:this.props.containerHeight,overflowX:"hidden",overflowY:"scroll"}},buildHeightStyle:function(t){return{width:"100%",height:Math.ceil(t)+"px"}},render:function(){var t=this.props.children.slice(this.state.displayIndexStart,this.state.displayIndexEnd),e={};this.state.isScrolling&&(e.pointerEvents="none");var i=this.state.infiniteComputer.getTopSpacerHeight(this.state.displayIndexStart),n=this.state.infiniteComputer.getBottomSpacerHeight(this.state.displayIndexEnd);return r.createElement("div",{className:this.props.className?this.props.className:"",ref:"scrollable",style:this.buildScrollableStyle(),onScroll:this.infiniteHandleScroll},r.createElement("div",{ref:"smoothScrollingWrapper",style:e},r.createElement("div",{ref:"topSpacer",style:this.buildHeightStyle(i)}),t,r.createElement("div",{ref:"bottomSpacer",style:this.buildHeightStyle(n)}),r.createElement("div",{ref:"loadingSpinner"},this.state.isInfiniteLoading?this.props.loadingSpinnerDelegate:null)))}});e.exports=s,i.Infinite=s}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./computers/array_infinite_computer.js":5,"./computers/constant_infinite_computer.js":6,"lodash.isarray":2,"lodash.isfinite":3,react:void 0}],2:[function(t,e,i){function r(t){return"string"==typeof t?t:null==t?"":t+""}function n(t){return!!t&&"object"==typeof t}function o(t,e){var i=null==t?void 0:t[e];return a(i)?i:void 0}function l(t){return"number"==typeof t&&t>-1&&t%1==0&&v>=t}function a(t){return null==t?!1:S.call(t)==c?m.test(g.call(t)):n(t)&&f.test(t)}function s(t){return t=r(t),t&&h.test(t)?t.replace(u,"\\$&"):t}var p="[object Array]",c="[object Function]",u=/[.*+?^${}()|[\]\/\\]/g,h=RegExp(u.source),f=/^\[object .+?Constructor\]$/,d=Object.prototype,g=Function.prototype.toString,y=d.hasOwnProperty,S=d.toString,m=RegExp("^"+s(g.call(y)).replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),b=o(Array,"isArray"),v=9007199254740991,T=b||function(t){return n(t)&&l(t.length)&&S.call(t)==p};e.exports=T},{}],3:[function(t,e,i){(function(i){var r=t("lodash._getnative"),n=i.isFinite,o=r(Number,"isFinite"),l=o||function(t){return"number"==typeof t&&n(t)};e.exports=l}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"lodash._getnative":4}],4:[function(t,e,i){function r(t){return"string"==typeof t?t:null==t?"":t+""}function n(t){return!!t&&"object"==typeof t}function o(t,e){var i=null==t?void 0:t[e];return l(i)?i:void 0}function l(t){return null==t?!1:g.call(t)==s?y.test(f.call(t)):n(t)&&u.test(t)}function a(t){return t=r(t),t&&c.test(t)?t.replace(p,"\\$&"):t}var s="[object Function]",p=/[.*+?^${}()|[\]\/\\]/g,c=RegExp(p.source),u=/^\[object .+?Constructor\]$/,h=Object.prototype,f=Function.prototype.toString,d=h.hasOwnProperty,g=h.toString,y=RegExp("^"+a(f.call(d)).replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=o},{}],5:[function(t,e,i){function r(t,e){"use strict";n.call(this,t,e),this.prefixHeightData=this.heightData.reduce(function(t,e){return 0===t.length?[e]:(t.push(t[t.length-1]+e),t)},[])}var n=t("./infinite_computer.js"),o=t("../utils/binary_index_search.js");for(var l in n)n.hasOwnProperty(l)&&(r[l]=n[l]);var a=null===n?null:n.prototype;r.prototype=Object.create(a),r.prototype.constructor=r,r.__superConstructor__=n,Object.defineProperty(r.prototype,"getTotalScrollableHeight",{writable:!0,configurable:!0,value:function(){"use strict";var t=this.prefixHeightData.length;return 0===t?0:this.prefixHeightData[t-1]}}),Object.defineProperty(r.prototype,"getDisplayIndexStart",{writable:!0,configurable:!0,value:function(t){"use strict";return o.binaryIndexSearch(this.prefixHeightData,t,o.opts.CLOSEST_HIGHER)}}),Object.defineProperty(r.prototype,"getDisplayIndexEnd",{writable:!0,configurable:!0,value:function(t){"use strict";return o.binaryIndexSearch(this.prefixHeightData,t,o.opts.CLOSEST_HIGHER)+1}}),Object.defineProperty(r.prototype,"getTopSpacerHeight",{writable:!0,configurable:!0,value:function(t){"use strict";var e=t-1;return 0>e?0:this.prefixHeightData[e]}}),Object.defineProperty(r.prototype,"getBottomSpacerHeight",{writable:!0,configurable:!0,value:function(t){"use strict";var e=t-1;return 0===t?this.getTotalScrollableHeight():t>=this.prefixHeightData.length?0:this.getTotalScrollableHeight()-this.prefixHeightData[e]}}),e.exports=r},{"../utils/binary_index_search.js":8,"./infinite_computer.js":7}],6:[function(t,e,i){function r(){"use strict";null!==n&&n.apply(this,arguments)}var n=t("./infinite_computer.js");for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o]);var l=null===n?null:n.prototype;r.prototype=Object.create(l),r.prototype.constructor=r,r.__superConstructor__=n,Object.defineProperty(r.prototype,"getTotalScrollableHeight",{writable:!0,configurable:!0,value:function(){"use strict";return this.heightData*this.numberOfChildren}}),Object.defineProperty(r.prototype,"getDisplayIndexStart",{writable:!0,configurable:!0,value:function(t){"use strict";return Math.floor(t/this.heightData)}}),Object.defineProperty(r.prototype,"getDisplayIndexEnd",{writable:!0,configurable:!0,value:function(t){"use strict";return Math.ceil(t/this.heightData)}}),Object.defineProperty(r.prototype,"getTopSpacerHeight",{writable:!0,configurable:!0,value:function(t){"use strict";return t*this.heightData}}),Object.defineProperty(r.prototype,"getBottomSpacerHeight",{writable:!0,configurable:!0,value:function(t){"use strict";return Math.max(0,(this.numberOfChildren-t)*this.heightData)}}),e.exports=r},{"./infinite_computer.js":7}],7:[function(t,e,i){function r(t,e){"use strict";this.heightData=t,this.numberOfChildren=e}Object.defineProperty(r.prototype,"getTotalScrollableHeight",{writable:!0,configurable:!0,value:function(){"use strict";throw new Error("getTotalScrollableHeight not implemented.")}}),Object.defineProperty(r.prototype,"getDisplayIndexStart",{writable:!0,configurable:!0,value:function(t){"use strict";throw new Error("getDisplayIndexStart not implemented.")}}),Object.defineProperty(r.prototype,"getDisplayIndexEnd",{writable:!0,configurable:!0,value:function(t){"use strict";throw new Error("getDisplayIndexEnd not implemented.")}}),Object.defineProperty(r.prototype,"getTopSpacerHeight",{writable:!0,configurable:!0,value:function(t){"use strict";throw new Error("getTopSpacerHeight not implemented.")}}),Object.defineProperty(r.prototype,"getBottomSpacerHeight",{writable:!0,configurable:!0,value:function(t){"use strict";throw new Error("getBottomSpacerHeight not implemented.")}}),e.exports=r},{}],8:[function(t,e,i){var r={CLOSEST_LOWER:1,CLOSEST_HIGHER:2},n=function(t,e,i){for(var n,o,l,a=t.length-1,s=0;a>=s;){if(o=s+Math.floor((a-s)/2),l=t[o],l===e)return o;e>l?s=o+1:l>e&&(a=o-1)}return i===r.CLOSEST_LOWER&&s>0?n=s-1:i===r.CLOSEST_HIGHER&&a<t.length-1&&(n=a+1),n};e.exports={binaryIndexSearch:n,opts:r}},{}]},{},[1])(1)});